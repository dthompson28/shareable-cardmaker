import { Dialog, DialogContent, DialogHeader, DialogTitle } from "../../ui/dialog";
import { toast } from "sonner";
import { BusinessCardData } from "../../BusinessCardForm";

interface EmbedCodeDialogProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  data: BusinessCardData;
}

export const EmbedCodeDialog = ({ open, onOpenChange, data }: EmbedCodeDialogProps) => {
  const handleCopyCode = (code: string) => {
    navigator.clipboard.writeText(code);
    toast.success("Embed code copied to clipboard!");
  };

  const iframeCode = `<iframe src="data:text/html;base64,CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyI+CiAgPHRpdGxlPkRhbmkgVGhvbXBzb24gLSBEaWdpdGFsIEJ1c2luZXNzIENhcmQ8L3RpdGxlPgogIDxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9UGxheWZhaXIrRGlzcGxheTp3Z2h0QDQwMDs1MDA7NjAwOzcwMCZmYW1pbHk9T3BlbitTYW5zOndnaHRANDAwOzUwMDs2MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgogIDxzdHlsZT4KICAgICogewogICAgICBtYXJnaW46IDA7CiAgICAgIHBhZGRpbmc6IDA7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgIGZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2NlY2FiZTsKICAgIH0KCiAgICBib2R5IHsKICAgICAgZm9udC1mYW1pbHk6ICdPcGVuIFNhbnMnLCBzYW5zLXNlcmlmOwogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2VjYWJlOwogICAgICBtYXJnaW46IDA7CiAgICAgIHBhZGRpbmc6IDA7CiAgICB9CgogICAgLmNhcmQtd3JhcHBlciB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBoZWlnaHQ6IDEwMHZoOwogICAgfQoKICAgIC5jYXJkIHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2NlY2FiZTsKICAgICAgYm9yZGVyLXJhZGl1czogMC43NXJlbTsKICAgICAgbWF4LXdpZHRoOiA0NDhweDsKICAgICAgd2lkdGg6IDkwJTsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDE1cHggLTNweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICAgIHBhZGRpbmc6IDI0cHg7CiAgICAgIG1hcmdpbjogMDsKICAgIH0KCiAgICAuaGVhZGVyIHsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMjU2cHg7CiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnaHR0cHM6Ly9zdG9yYWdlLmdvb2dsZWFwaXMuY29tL21zZ3NuZHIvTVpXZFFsZ0lUWm85bW0xMzc2RHYvbWVkaWEvNjc0OTJiYzk2YTI4OTQyNzJmOGMyNWQ3LmpwZWcnKTsKICAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsKICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOwogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB9CgogICAgLmhlYWRlci10ZXh0IHsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICBib3R0b206IDI0cHg7CiAgICAgIGxlZnQ6IDI0cHg7CiAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgdGV4dC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMyk7CiAgICB9CgogICAgLmhlYWRlci10ZXh0IGgxIHsKICAgICAgZm9udC1mYW1pbHk6ICdQbGF5ZmFpciBEaXNwbGF5Jywgc2VyaWY7CiAgICAgIGZvbnQtc2l6ZTogMzBweDsKICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgIG1hcmdpbi1ib3R0b206IDRweDsKICAgIH0KCiAgICAuaGVhZGVyLXRleHQgcCB7CiAgICAgIGZvbnQtZmFtaWx5OiAnUGxheWZhaXIgRGlzcGxheScsIHNlcmlmOwogICAgICBmb250LXNpemU6IDIwcHg7CiAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgICAgIG1hcmdpbjogMnB4IDA7CiAgICB9CgogICAgLmNvbnRhY3QtaW5mbyB7CiAgICAgIGZvbnQtZmFtaWx5OiAnT3BlbiBTYW5zJywgc2Fucy1zZXJpZjsKICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICBmb250LXdlaWdodDogNDAwOwogICAgICBtYXJnaW46IDI0cHggMDsKICAgIH0KCiAgICAuY29udGFjdC1saW5rIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgZ2FwOiAxMnB4OwogICAgICBjb2xvcjogIzAwNjc0ZjsKICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgICBtYXJnaW46IDEycHggMDsKICAgIH0KCiAgICAuc3ZnLWljb24gewogICAgICB3aWR0aDogMjBweDsKICAgICAgaGVpZ2h0OiAyMHB4OwogICAgfQoKICAgIC5zb2NpYWwtbGlua3MgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgZ2FwOiAyNHB4OwogICAgICBtYXJnaW46IDI0cHggMDsKICAgIH0KCiAgICAuc29jaWFsLWxpbmsgewogICAgICBjb2xvcjogIzAwNjc0ZjsKICAgICAgdHJhbnNpdGlvbjogY29sb3IgMC4ycyBlYXNlOwogICAgfQoKICAgIC5hZGRpdGlvbmFsLWxpbmsgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBnYXA6IDhweDsKICAgICAgY29sb3I6ICMzMjY4NzI7CiAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgICAgbWFyZ2luOiAxMnB4IDA7CiAgICB9CgogICAgLmFjdGlvbi1idXR0b25zIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZ2FwOiAxMnB4OwogICAgICBtYXJnaW4tdG9wOiAyNHB4OwogICAgfQoKICAgIC5hY3Rpb24tYnV0dG9uIHsKICAgICAgZmxleDogMTsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgIGdhcDogOHB4OwogICAgICBwYWRkaW5nOiAxMnB4OwogICAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlOwogICAgfQoKICAgIC5zaGFyZS1idXR0b24gewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA2NzRmOwogICAgICBjb2xvcjogd2hpdGU7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgIH0KCiAgICAuc2F2ZS1idXR0b24gewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2VjYWJlOwogICAgICBjb2xvcjogI2JlNTEwMzsKICAgICAgYm9yZGVyOiAycHggc29saWQgI2JlNTEwMzsKICAgIH0KCiAgICAuc2F2ZS1idXR0b246aG92ZXIgewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzI2ODcyOwogICAgICBjb2xvcjogd2hpdGU7CiAgICAgIGJvcmRlci1jb2xvcjogIzMyNjg3MjsKICAgIH0KICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogIDxkaXYgY2xhc3M9ImNhcmQtd3JhcHBlciI+CiAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyIj4KICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9zdG9yYWdlLmdvb2dsZWFwaXMuY29tL21zZ3NuZHIvTVpXZFFsZ0lUWm85bW0xMzc2RHYvbWVkaWEvNjc0OTIyNTkzNDQ3YTU5NTk5MTIzMTU3LnBuZyIgYWx0PSJMb2dvIiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyB0b3A6IDI0cHg7IHJpZ2h0OiAyNHB4OyB3aWR0aDogNjRweDsgaGVpZ2h0OiA2NHB4OyBvYmplY3QtZml0OiBjb250YWluOyI+CiAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXRleHQiPgogICAgICAgICAgPGgxPkRhbmkgVGhvbXBzb248L2gxPgogICAgICAgICAgPHA+TWFya2V0ZXI8L3A+CiAgICAgICAgICA8cD5UaG9tcHNvbiBMaW1pdGVkPC9wPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iY29udGFjdC1pbmZvIj4KICAgICAgICA8YSBocmVmPSJ0ZWw6NDQwNTAzODAxMSIgY2xhc3M9ImNvbnRhY3QtbGluayI+CiAgICAgICAgICA8c3ZnIGNsYXNzPSJzdmctaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPgogICAgICAgICAgICA8cGF0aCBkPSJNMjIgMTYuOTJ2M2EyIDIgMCAwIDEtMi4xOCAyIDE5Ljc5IDE5Ljc5IDAgMCAxLTguNjMtMy4wNyAxOS41IDE5LjUgMCAwIDEtNi02IDE5Ljc5IDE5Ljc5IDAgMCAxLTMuMDctOC42N0EyIDIgMCAwIDEgNC4xMSAyaDNhMiAyIDAgMCAxIDIgMS43MmMuMTI3Ljk2LjM2MSAxLjkwMy43IDIuODFhMiAyIDAgMCAxLS40NSAyLjExTDguMDkgOS45MWExNiAxNiAwIDAgMCA2IDZsMS4yNy0xLjI3YTIgMiAwIDAgMSAyLjExLS40NWMuOTA3LjMzOSAxLjg1LjU3MyAyLjgxLjdBMiAyIDAgMCAxIDIyIDE2LjkyeiIvPgogICAgICAgICAgPC9zdmc+CiAgICAgICAgICA0NDAtNTAzLTgwMTEKICAgICAgICA8L2E+CiAgICAgICAgPGEgaHJlZj0ibWFpbHRvOmRhbmlAZGFuaXRob21wc29ubHRkLmNvbSIgY2xhc3M9ImNvbnRhY3QtbGluayI+CiAgICAgICAgICA8c3ZnIGNsYXNzPSJzdmctaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPgogICAgICAgICAgICA8cGF0aCBkPSJNNCAxaDEyYTIgMiAwIDAgMSAyIDJ2MTJhMiAyIDAgMCAxLTIgMkg0YTIgMiAwIDAgMS0yLTJWM2EyIDIgMCAwIDEgMi0yeiIvPgogICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPSIyMiw2IDEyLDEzIDIsNiIvPgogICAgICAgICAgPC9zdmc+CiAgICAgICAgICBkYW5pQGRhbml0aG9tcHNvbmx0ZC5jb20KICAgICAgICA8L2E+CiAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly9kYW5pdGhvbXBzb25sdGQuY29tL3NjaGVkdWxlLWEtY2FsbC1kYW5pdGhvbXBzb24iIGNsYXNzPSJjb250YWN0LWxpbmsiPgogICAgICAgICAgPHN2ZyBjbGFzcz0ic3ZnLWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICAgICAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiLz4KICAgICAgICAgICAgPGxpbmUgeDE9IjIiIHkxPSIxMiIgeDI9IjIyIiB5Mj0iMTIiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTEyIDJhMTUuMyAxNS4zIDAgMCAxIDQgMTAgMTUuMyAxNS4zIDAgMCAxLTQgMTAgMTUuMyAxNS4zIDAgMCAxLTQtMTAgMTUuMyAxNS4zIDAgMCAxIDQtMTB6Ii8+CiAgICAgICAgICA8L3N2Zz4KICAgICAgICAgIGRhbml0aG9tcHNvbmx0ZC5jb20KICAgICAgICA8L2E+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzb2NpYWwtbGlua3MiPgogICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS9pbi9kYW5pZWxsZS10aG9tcHNvbi1jbGV2ZWxhbmQvIiBjbGFzcz0ic29jaWFsLWxpbmsiPgogICAgICAgICAgPHN2ZyBjbGFzcz0ic3ZnLWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICAgICAgPHBhdGggZD0iTTE2IDhhNiA2IDAgMCAxIDYgNnY3aC00di03YTIgMiAwIDAgMC0yLTIgMiAyIDAgMCAwLTIgMnY3aC00di03YTYgNiAwIDAgMSA2LTZ6Ii8+CiAgICAgICAgICAgIDxyZWN0IHdpZHRoPSI0IiBoZWlnaHQ9IjEyIiB4PSIyIiB5PSI5Ii8+CiAgICAgICAgICAgIDxjaXJjbGUgY3g9IjQiIGN5PSI0IiByPSIyIi8+CiAgICAgICAgICA8L3N2Zz4KICAgICAgICA8L2E+CiAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2Rhbml0aG9tcDIwMTQiIGNsYXNzPSJzb2NpYWwtbGluayI+CiAgICAgICAgICA8c3ZnIGNsYXNzPSJzdmctaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPgogICAgICAgICAgICA8cGF0aCBkPSJNMTggMmgtM2E1IDUgMCAwIDAtNSA1djNIN3Y0aDN2OGg0di04aDNsMS00aC00VjdhMSAxIDAgMCAxIDEtMWgzeiIvPgogICAgICAgICAgPC9zdmc+CiAgICAgICAgPC9hPgogICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vd3d3Lmluc3RhZ3JhbS5jb20vZGFuaXRob21wc29uY2xlLyIgY2xhc3M9InNvY2lhbC1saW5rIj4KICAgICAgICAgIDxzdmcgY2xhc3M9InN2Zy1pY29uIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgICAgIDxyZWN0IHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgeD0iMiIgeT0iMiIgcng9IjUiIHJ5PSI1Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNiAxMS4zN0E0IDQgMCAxIDEgMTIuNjMgOCA0IDQgMCAwIDEgMTYgMTEuMzd6Ii8+CiAgICAgICAgICAgIDxsaW5lIHgxPSIxNy41IiB4Mj0iMTcuNTEiIHkxPSI2LjUiIHkyPSI2LjUiLz4KICAgICAgICAgIDwvc3ZnPgogICAgICAgIDwvYT4KICAgICAgPC9kaXY+CiAgICAgIDxhIGhyZWY9Imh0dHBzOi8vZGFuaXRob21wc29ubHRkLmNvbS9zY2hlZHVsZS1hLWNhbGwtZGFuaXRob21wc29uIiBjbGFzcz0iYWRkaXRpb25hbC1saW5rIj4KICAgICAgICA8c3ZnIGNsYXNzPSJzdmctaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPgogICAgICAgICAgPHBhdGggZD0iTTUgMTJoMTRNMTIgNWw3IDctNyA3Ii8+CiAgICAgICAgPC9zdmc+CiAgICAgICAgdGhpcyBpcyBidWxsc2hpdAogICAgICA8L2E+CiAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbi1idXR0b25zIj4KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InNoYXJlQ2FyZCgpIiBjbGFzcz0iYWN0aW9uLWJ1dHRvbiBzaGFyZS1idXR0b24iPgogICAgICAgICAgPHN2ZyBjbGFzcz0ic3ZnLWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICAgICAgPGNpcmNsZSBjeD0iMTgiIGN5PSI1IiByPSIzIi8+CiAgICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSIxMiIgcj0iMyIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE5IiByPSIzIi8+CiAgICAgICAgICAgIDxsaW5lIHgxPSI4LjU5IiB5MT0iMTMuNTEiIHgyPSIxNS40MiIgeTI9IjE3LjQ5Ii8+CiAgICAgICAgICAgIDxsaW5lIHgxPSIxNS40MSIgeTE9IjYuNTEiIHgyPSI4LjU5IiB5Mj0iMTAuNDkiLz4KICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgU2hhcmUKICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InNhdmVDb250YWN0KCkiIGNsYXNzPSJhY3Rpb24tYnV0dG9uIHNhdmUtYnV0dG9uIj4KICAgICAgICAgIDxzdmcgY2xhc3M9InN2Zy1pY29uIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMSAxNXY0YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0ydi00Ii8+CiAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9IjcgMTAgMTIgMTUgMTcgMTAiLz4KICAgICAgICAgICAgPGxpbmUgeDE9IjEyIiB5MT0iMTUiIHgyPSIxMiIgeTI9IjMiLz4KICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgU2F2ZSBDb250YWN0CiAgICAgICAgPC9idXR0b24+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgPC9kaXY+CiAgPHNjcmlwdD4KICAgIGZ1bmN0aW9uIHNoYXJlQ2FyZCgpIHsKICAgICAgaWYgKG5hdmlnYXRvci5zaGFyZSkgewogICAgICAgIG5hdmlnYXRvci5zaGFyZSh7CiAgICAgICAgICB0aXRsZTogJ0RhbmkgVGhvbXBzb24gLSBEaWdpdGFsIEJ1c2luZXNzIENhcmQnLAogICAgICAgICAgdGV4dDogJ0NoZWNrIG91dCBteSBkaWdpdGFsIGJ1c2luZXNzIGNhcmQhJywKICAgICAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLmhyZWYKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCB0ZW1wSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICAgIHRlbXBJbnB1dC52YWx1ZSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGVtcElucHV0KTsKICAgICAgICB0ZW1wSW5wdXQuc2VsZWN0KCk7CiAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTsKICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRlbXBJbnB1dCk7CiAgICAgICAgYWxlcnQoJ0xpbmsgY29waWVkIHRvIGNsaXBib2FyZCEnKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNhdmVDb250YWN0KCkgewogICAgICBjb25zdCB2Y2FyZCA9IGBCRUdJTjpWQ0FSRApWRVJTSU9OOjMuMApGTjpEYW5pIFRob21wc29uCk46VGhvbXBzb247RGFuaTs7OwpUSVRMRTpNYXJrZXRlcgpPUkc6VGhvbXBzb24gTGltaXRlZApURUw7VFlQRT13b3JrLHZvaWNlOjQ0MDUwMzgwMTEKRU1BSUw7VFlQRT13b3JrOmRhbmlAZGFuaXRob21wc29ubHRkLmNvbQpVUkw6aHR0cHM6Ly9kYW5pdGhvbXBzb25sdGQuY29tL3NjaGVkdWxlLWEtY2FsbC1kYW5pdGhvbXBzb24KUEhPVE87VkFMVUU9VVJMOmh0dHBzOi8vc3RvcmFnZS5nb29nbGVhcGlzLmNvbS9tc2dzbmRyL01aV2RRbGdJVFpvOW1tMTM3NkR2L21lZGlhLzY3NDkyYmM5NmEyODk0MjcyZjhjMjVkNy5qcGVnClgtU09DSUFMUFJPRklMRTtUWVBFPWxpbmtlZGluOmh0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS9pbi9kYW5pZWxsZS10aG9tcHNvbi1jbGV2ZWxhbmQvClgtU09DSUFMUFJPRklMRTtUWVBFPWZhY2Vib29rOmh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9kYW5pdGhvbXAyMDE0ClgtU09DSUFMUFJPRklMRTtUWVBFPWluc3RhZ3JhbTpodHRwczovL3d3dy5pbnN0YWdyYW0uY29tL2Rhbml0aG9tcHNvbmNsZS8KRU5EOlZDQVJEYDsKICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFt2Y2FyZF0sIHsgdHlwZTogJ3RleHQvdmNhcmQnIH0pOwogICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICAgIGxpbmsuZG93bmxvYWQgPSAnRGFuaV9UaG9tcHNvbl9Db250YWN0LnZjZic7CiAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgfQogIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=" style="width: 100%; height: 600px; border: none;">`;

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="max-h-[80vh] overflow-hidden flex flex-col">
        <DialogHeader>
          <DialogTitle>Embed Code</DialogTitle>
        </DialogHeader>
        <div className="mt-4 flex-1 overflow-hidden flex flex-col">
          <p className="text-sm text-muted-foreground mb-4">
            Copy and paste this code into your HighLevel funnel:
          </p>
          <div className="flex-1 overflow-y-auto">
            <pre className="bg-secondary p-4 rounded-md overflow-x-auto whitespace-pre-wrap">
              <code className="text-sm">{iframeCode}</code>
            </pre>
          </div>
          <button
            onClick={() => handleCopyCode(iframeCode)}
            className="mt-4 w-full px-6 py-3 text-base font-medium rounded-md transition-all duration-300 hover:opacity-90"
            style={{ 
              backgroundColor: data.colors.primary,
              color: "#FFFFFF"
            }}
          >
            Copy Embed Code
          </button>
        </div>
      </DialogContent>
    </Dialog>
  );
};